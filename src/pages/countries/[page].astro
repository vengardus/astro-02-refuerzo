---
import { getAllCountryFilterResponse } from "@/actions/index";
import Pagination from "@/components/shared/Pagination.astro";
import Title from "@/components/shared/Title.astro";
import MainLayout from "@/layouts/MainLayout.astro";
import type { GetStaticPaths, Page } from "astro";

export const getStaticPaths = (async({paginate}) => {
  const countries = await getAllCountryFilterResponse();
  return paginate(countries, { pageSize: 8 });
}) satisfies GetStaticPaths;

const { page } = Astro.props;

console.log('page', page)

---
<MainLayout title="Vengardus | Countries">

  <Title>Lista de paises</Title>

  <section class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-7 pt-3">
    {
      page.data.map((country) => (
        <div class="flex flex-col gap-2 items-center justify-center">
          <p>{country.name.common}</p>
          <div class="border border-1 h-40 w-48">
            <img
              src={country.flags.png}
              alt={country.flags.alt ?? ""}
              width="100"
              height="100"
              class={"w-full h-full object-content"}
            />
          </div>
        </div>
      ))
    }
  </section>

  <Pagination page={page} />
</MainLayout>


